-- Gift / Item Bring GUI System (PlayerModels ƒ∞√ßin)
-- Made by GPT-5 x Hasan üí™

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local mouse = player:GetMouse()

-----------------------------------------------------
-- GUI OLU≈ûTURMA
-----------------------------------------------------
local ScreenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
local Frame = Instance.new("Frame", ScreenGui)
local BringButton = Instance.new("TextButton", Frame)
local Title = Instance.new("TextLabel", Frame)

ScreenGui.Name = "GiftBringGUI"
Frame.Size = UDim2.new(0, 200, 0, 100)
Frame.Position = UDim2.new(0.5, -100, 0.9, -50)
Frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
Frame.BorderSizePixel = 0
Frame.BackgroundTransparency = 0.2
Frame.Visible = true
Frame.Active = true
Frame.Draggable = true

Title.Text = "üéÅ Gift Bring"
Title.Size = UDim2.new(1, 0, 0.5, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(0,170,255)
Title.Font = Enum.Font.GothamBold
Title.TextScaled = true

BringButton.Text = "üöÄ I≈üƒ±nla"
BringButton.Size = UDim2.new(1, -20, 0.4, 0)
BringButton.Position = UDim2.new(0,10,0.55,0)
BringButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
BringButton.TextColor3 = Color3.new(1,1,1)
BringButton.Font = Enum.Font.GothamBold
BringButton.TextScaled = true
BringButton.AutoButtonColor = true

-----------------------------------------------------
-- SE√áME Sƒ∞STEMƒ∞
-----------------------------------------------------
local selectedModel = nil
local highlight = nil

local function toggleSelect(target)
	if not target or not target:IsDescendantOf(workspace.PlayerModels) then return end

	-- Aynƒ± modeli tekrar se√ßerse iptal et
	if selectedModel == target then
		if highlight then
			highlight:Destroy()
			highlight = nil
		end
		selectedModel = nil
		return
	end

	-- √ñnceden se√ßili varsa temizle
	if highlight then
		highlight:Destroy()
	end

	-- Yeni hedefi se√ß
	selectedModel = target
	highlight = Instance.new("Highlight")
	highlight.FillColor = Color3.fromRGB(0, 170, 255)
	highlight.OutlineColor = Color3.fromRGB(0, 255, 255)
	highlight.FillTransparency = 0.5
	highlight.OutlineTransparency = 0
	highlight.Parent = selectedModel
end

mouse.Button1Down:Connect(function()
	local target = mouse.Target
	if target then
		local model = target:FindFirstAncestorOfClass("Model")
		if model and model:IsDescendantOf(workspace.PlayerModels) then
			toggleSelect(model)
		end
	end
end)

-----------------------------------------------------
-- GELƒ∞≈ûMƒ∞≈û I≈ûINLAMA (SWAP TARZI)
-----------------------------------------------------
BringButton.MouseButton1Click:Connect(function()
	if not selectedModel then
		warn("Se√ßili bir e≈üya yok!")
		return
	end

	local char = player.Character
	local hrp = char and char:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	local obj = selectedModel
	local part = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
	if not part then
		warn("Objede PrimaryPart yok!")
		return
	end

	obj.PrimaryPart = part

	-- 1Ô∏è‚É£ Oyuncunun mevcut konumunu kaydet
	local savedCFrame = hrp.CFrame

	-- 2Ô∏è‚É£ Oyuncuyu gift‚Äôin yanƒ±na ƒ±≈üƒ±nla
	local targetPos = part.Position + Vector3.new(5, 0, 0)
	hrp.CFrame = CFrame.new(targetPos, part.Position)

	-- 3Ô∏è‚É£ ReplicatedStorage ile dragging sinyali g√∂nder
	task.spawn(function()
		for i = 1, 60 do
			ReplicatedStorage.Interaction.ClientIsDragging:FireServer(obj)
			task.wait()
		end
	end)

	task.wait(0.25) -- g√ºvenli gecikme (senkron i√ßin)

	-- 4Ô∏è‚É£ Gift‚Äôi kaydedilen eski konuma ƒ±≈üƒ±nla
	obj:SetPrimaryPartCFrame(savedCFrame)
	obj.PrimaryPart.AssemblyLinearVelocity = Vector3.new(0, 0, 0)

	-- 5Ô∏è‚É£ Oyuncuyu tekrar eski konumuna d√∂nd√ºr
	task.wait(0.2)
	hrp.CFrame = savedCFrame

	print("‚úÖ Gift ba≈üarƒ±yla getirildi:", obj.Name)
end)
